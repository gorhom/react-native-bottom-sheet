{"version":3,"sources":["BottomSheetView.tsx"],"names":["React","memo","useEffect","useCallback","useMemo","StyleSheet","Animated","useAnimatedStyle","SCROLLABLE_TYPE","useBottomSheetInternal","print","BottomSheetViewComponent","focusHook","useFocusHook","enableFooterMarginAdjustment","onLayout","style","children","rest","animatedScrollableContentOffsetY","animatedScrollableType","animatedFooterHeight","enableDynamicSizing","animatedContentHeight","containerStylePaddingBottom","flattenStyle","flatten","paddingBottom","containerAnimatedStyle","value","containerStyle","handleSettingScrollable","VIEW","handleLayout","event","nativeEvent","layout","height","component","BottomSheetView","displayName","method","params"],"mappings":"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","sourcesContent":["import React, { memo, useEffect, useCallback, useMemo } from 'react';\nimport { LayoutChangeEvent, StyleSheet } from 'react-native';\nimport Animated, { useAnimatedStyle } from 'react-native-reanimated';\nimport { SCROLLABLE_TYPE } from '../../constants';\nimport { useBottomSheetInternal } from '../../hooks';\nimport type { BottomSheetViewProps } from './types';\nimport { print } from '../../utilities';\n\nfunction BottomSheetViewComponent({\n  focusHook: useFocusHook = useEffect,\n  enableFooterMarginAdjustment = false,\n  onLayout,\n  style,\n  children,\n  ...rest\n}: BottomSheetViewProps) {\n  //#region hooks\n  const {\n    animatedScrollableContentOffsetY,\n    animatedScrollableType,\n    animatedFooterHeight,\n    enableDynamicSizing,\n    animatedContentHeight,\n  } = useBottomSheetInternal();\n  //#endregion\n\n  //#region styles\n  const containerStylePaddingBottom = useMemo(() => {\n    const flattenStyle = StyleSheet.flatten(style);\n    const paddingBottom =\n      flattenStyle && 'paddingBottom' in flattenStyle\n        ? flattenStyle.paddingBottom\n        : 0;\n    return typeof paddingBottom === 'number' ? paddingBottom : 0;\n  }, [style]);\n  const containerAnimatedStyle = useAnimatedStyle(\n    () => ({\n      paddingBottom: enableFooterMarginAdjustment\n        ? animatedFooterHeight.value + containerStylePaddingBottom\n        : containerStylePaddingBottom,\n    }),\n    [containerStylePaddingBottom, enableFooterMarginAdjustment]\n  );\n  const containerStyle = useMemo(\n    () => [style, containerAnimatedStyle],\n    [style, containerAnimatedStyle]\n  );\n  //#endregion\n\n  //#region callbacks\n  const handleSettingScrollable = useCallback(() => {\n    animatedScrollableContentOffsetY.value = 0;\n    animatedScrollableType.value = SCROLLABLE_TYPE.VIEW;\n  }, [animatedScrollableContentOffsetY, animatedScrollableType]);\n  const handleLayout = useCallback(\n    (event: LayoutChangeEvent) => {\n      if (enableDynamicSizing) {\n        animatedContentHeight.value = event.nativeEvent.layout.height;\n      }\n\n      if (onLayout) {\n        onLayout(event);\n      }\n\n      print({\n        component: BottomSheetView.displayName,\n        method: 'handleLayout',\n        params: {\n          height: event.nativeEvent.layout.height,\n        },\n      });\n    },\n    [onLayout, animatedContentHeight, enableDynamicSizing]\n  );\n  //#endregion\n\n  // effects\n  useFocusHook(handleSettingScrollable);\n\n  //render\n  return (\n    <Animated.View onLayout={handleLayout} style={containerStyle} {...rest}>\n      {children}\n    </Animated.View>\n  );\n}\n\nconst BottomSheetView = memo(BottomSheetViewComponent);\nBottomSheetView.displayName = 'BottomSheetView';\n\nexport default BottomSheetView;\n"]}