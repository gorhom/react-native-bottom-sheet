{"version":3,"sources":["useGestureHandler.ts"],"names":["resetContext","context","Object","keys","map","key","undefined","useGestureHandler","type","state","gestureSource","handleOnStart","handleOnActive","handleOnEnd","gestureHandler","onActive","payload","didStart","value","State","BEGAN","onEnd","GESTURE_SOURCE","UNDETERMINED","onCancel","onFail","onFinish"],"mappings":";;;;;;;AAAA;;AACA;;AAIA;;AAMA,MAAMA,YAAY,GAAIC,OAAD,IAAkB;AACrC;;AAEAC,EAAAA,MAAM,CAACC,IAAP,CAAYF,OAAZ,EAAqBG,GAArB,CAAyBC,GAAG,IAAI;AAC9BJ,IAAAA,OAAO,CAACI,GAAD,CAAP,GAAeC,SAAf;AACD,GAFD;AAGD,CAND;;AAQO,MAAMC,iBAAiB,GAAG,CAC/BC,IAD+B,EAE/BC,KAF+B,EAG/BC,aAH+B,EAI/BC,aAJ+B,EAK/BC,cAL+B,EAM/BC,WAN+B,KAOsB;AACrD,QAAMC,cAAc,GAAG,sDAIrB;AACEC,IAAAA,QAAQ,EAAE,CAACC,OAAD,EAAUf,OAAV,KAAsB;AAC9B,UAAI,CAACA,OAAO,CAACgB,QAAb,EAAuB;AACrBhB,QAAAA,OAAO,CAACgB,QAAR,GAAmB,IAAnB;AAEAR,QAAAA,KAAK,CAACS,KAAN,GAAcC,iCAAMC,KAApB;AACAV,QAAAA,aAAa,CAACQ,KAAd,GAAsBV,IAAtB;AAEAG,QAAAA,aAAa,CAACH,IAAD,EAAOQ,OAAP,EAAgBf,OAAhB,CAAb;AACA;AACD;;AAED,UAAIS,aAAa,CAACQ,KAAd,KAAwBV,IAA5B,EAAkC;AAChC;AACD;;AAEDC,MAAAA,KAAK,CAACS,KAAN,GAAcF,OAAO,CAACP,KAAtB;AACAG,MAAAA,cAAc,CAACJ,IAAD,EAAOQ,OAAP,EAAgBf,OAAhB,CAAd;AACD,KAlBH;AAmBEoB,IAAAA,KAAK,EAAE,CAACL,OAAD,EAAUf,OAAV,KAAsB;AAC3B,UAAIS,aAAa,CAACQ,KAAd,KAAwBV,IAA5B,EAAkC;AAChC;AACD;;AAEDC,MAAAA,KAAK,CAACS,KAAN,GAAcF,OAAO,CAACP,KAAtB;AACAC,MAAAA,aAAa,CAACQ,KAAd,GAAsBI,0BAAeC,YAArC;AAEAV,MAAAA,WAAW,CAACL,IAAD,EAAOQ,OAAP,EAAgBf,OAAhB,CAAX;AACAD,MAAAA,YAAY,CAACC,OAAD,CAAZ;AACD,KA7BH;AA8BEuB,IAAAA,QAAQ,EAAE,CAACR,OAAD,EAAUf,OAAV,KAAsB;AAC9B,UAAIS,aAAa,CAACQ,KAAd,KAAwBV,IAA5B,EAAkC;AAChC;AACD;;AAEDC,MAAAA,KAAK,CAACS,KAAN,GAAcF,OAAO,CAACP,KAAtB;AACAC,MAAAA,aAAa,CAACQ,KAAd,GAAsBI,0BAAeC,YAArC;AAEAvB,MAAAA,YAAY,CAACC,OAAD,CAAZ;AACD,KAvCH;AAwCEwB,IAAAA,MAAM,EAAE,CAACT,OAAD,EAAUf,OAAV,KAAsB;AAC5B,UAAIS,aAAa,CAACQ,KAAd,KAAwBV,IAA5B,EAAkC;AAChC;AACD;;AAEDC,MAAAA,KAAK,CAACS,KAAN,GAAcF,OAAO,CAACP,KAAtB;AACAC,MAAAA,aAAa,CAACQ,KAAd,GAAsBI,0BAAeC,YAArC;AAEAvB,MAAAA,YAAY,CAACC,OAAD,CAAZ;AACD,KAjDH;AAkDEyB,IAAAA,QAAQ,EAAE,CAACV,OAAD,EAAUf,OAAV,KAAsB;AAC9B,UAAIS,aAAa,CAACQ,KAAd,KAAwBV,IAA5B,EAAkC;AAChC;AACD;;AAEDC,MAAAA,KAAK,CAACS,KAAN,GAAcF,OAAO,CAACP,KAAtB;AACAC,MAAAA,aAAa,CAACQ,KAAd,GAAsBI,0BAAeC,YAArC;AAEAvB,MAAAA,YAAY,CAACC,OAAD,CAAZ;AACD;AA3DH,GAJqB,EAiErB,CAACO,IAAD,EAAOC,KAAP,EAAcE,aAAd,EAA6BC,cAA7B,EAA6CC,WAA7C,CAjEqB,CAAvB;AAmEA,SAAOC,cAAP;AACD,CA5EM","sourcesContent":["import Animated, { useAnimatedGestureHandler } from 'react-native-reanimated';\nimport {\n  State,\n  PanGestureHandlerGestureEvent,\n} from 'react-native-gesture-handler';\nimport { GESTURE_SOURCE } from '../constants';\nimport type {\n  GestureEventContextType,\n  GestureEventHandlerCallbackType,\n} from '../types';\n\nconst resetContext = (context: any) => {\n  'worklet';\n\n  Object.keys(context).map(key => {\n    context[key] = undefined;\n  });\n};\n\nexport const useGestureHandler = (\n  type: GESTURE_SOURCE,\n  state: Animated.SharedValue<State>,\n  gestureSource: Animated.SharedValue<GESTURE_SOURCE>,\n  handleOnStart: GestureEventHandlerCallbackType,\n  handleOnActive: GestureEventHandlerCallbackType,\n  handleOnEnd: GestureEventHandlerCallbackType\n): ((event: PanGestureHandlerGestureEvent) => void) => {\n  const gestureHandler = useAnimatedGestureHandler<\n    PanGestureHandlerGestureEvent,\n    GestureEventContextType\n  >(\n    {\n      onActive: (payload, context) => {\n        if (!context.didStart) {\n          context.didStart = true;\n\n          state.value = State.BEGAN;\n          gestureSource.value = type;\n\n          handleOnStart(type, payload, context);\n          return;\n        }\n\n        if (gestureSource.value !== type) {\n          return;\n        }\n\n        state.value = payload.state;\n        handleOnActive(type, payload, context);\n      },\n      onEnd: (payload, context) => {\n        if (gestureSource.value !== type) {\n          return;\n        }\n\n        state.value = payload.state;\n        gestureSource.value = GESTURE_SOURCE.UNDETERMINED;\n\n        handleOnEnd(type, payload, context);\n        resetContext(context);\n      },\n      onCancel: (payload, context) => {\n        if (gestureSource.value !== type) {\n          return;\n        }\n\n        state.value = payload.state;\n        gestureSource.value = GESTURE_SOURCE.UNDETERMINED;\n\n        resetContext(context);\n      },\n      onFail: (payload, context) => {\n        if (gestureSource.value !== type) {\n          return;\n        }\n\n        state.value = payload.state;\n        gestureSource.value = GESTURE_SOURCE.UNDETERMINED;\n\n        resetContext(context);\n      },\n      onFinish: (payload, context) => {\n        if (gestureSource.value !== type) {\n          return;\n        }\n\n        state.value = payload.state;\n        gestureSource.value = GESTURE_SOURCE.UNDETERMINED;\n\n        resetContext(context);\n      },\n    },\n    [type, state, handleOnStart, handleOnActive, handleOnEnd]\n  );\n  return gestureHandler;\n};\n"]}